<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Try-On Shopify - D√©mo Compl√®te | StyleLab</title>
    <meta name="description" content="D√©mo compl√®te : Produit avec Widget Virtual Try-On, Dashboard et Configuration. Tout visible directement sur la page d'accueil.">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="demo-app.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="env.js"></script>
    <script src="config.js"></script>
    <script src="widget.js"></script>
    <script src="app.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <div class="container">
                <div class="nav-container">
                    <a href="/" class="logo" aria-label="Style Lab Accueil">Style Lab</a>
                    <span class="logo-badge">Virtual Try‚ÄëOn</span>
                    <button class="mobile-menu-btn" aria-label="Menu" id="mobileMenuBtn">‚ò∞</button>
                    <div class="nav-links" id="navLinks">
                        <a href="#store" class="nav-link">Store</a>
                        <a href="#product-demo" class="nav-link">Produit</a>
                        <a href="#dashboard-demo" class="nav-link">Dashboard</a>
                        <a href="#widget-config" class="nav-link">Configuration</a>
                        <a href="https://apps.shopify.com/try-on-stylelab" target="_blank" rel="noopener" class="btn btn-primary">Installer l'App</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- HERO -->
    <section class="hero" style="padding: 4rem 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-align: center;">
        <div class="container">
            <h1 class="hero-title" style="font-size: 3rem; font-weight: 800; margin-bottom: 1rem; color: white;">Virtual Try-On Shopify - D√©mo Compl√®te</h1>
            <p class="hero-subtitle" style="font-size: 1.25rem; margin-bottom: 2rem; color: rgba(255,255,255,0.9);">Tout est visible directement sur cette page : Store, Produit avec Widget, Dashboard et Configuration</p>
        </div>
    </section>

    <!-- SECTION 0: STORE (LISTE DE PRODUITS) -->
    <section id="store" style="padding: 2rem 0; background: white;">
        <div class="container">
            <h2 class="section-title" style="text-align: center; margin-bottom: 2rem; font-size: 2.5rem; font-weight: 800;">Store - Collection de Produits</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 2rem; margin-top: 2rem;">
                <div class="product-card" style="background: white; border-radius: 1rem; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: all 0.3s; cursor: pointer;" onclick="scrollToProduct('product-demo')">
                    <img src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=600&h=600&fit=crop" 
                         alt="T-Shirt Premium Coton Bio" 
                         style="width: 100%; aspect-ratio: 1; object-fit: cover; background: #f3f4f6;">
                    <div style="padding: 1.5rem;">
                        <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: #111827;">T-Shirt Premium Coton Bio</h3>
                        <div style="font-size: 1.25rem; font-weight: 700; color: #008060;">
                            29,90 ‚Ç¨
                            <span style="font-size: 1rem; color: #6b7280; text-decoration: line-through; margin-left: 0.5rem;">39,90 ‚Ç¨</span>
                        </div>
                    </div>
                </div>

                <div class="product-card" style="background: white; border-radius: 1rem; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: all 0.3s; cursor: pointer;" onclick="scrollToProduct('product-demo')">
                    <img src="https://images.unsplash.com/photo-1618354691373-d851c5c3a990?w=600&h=600&fit=crop" 
                         alt="Jean Slim Fit Denim" 
                         style="width: 100%; aspect-ratio: 1; object-fit: cover; background: #f3f4f6;">
                    <div style="padding: 1.5rem;">
                        <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: #111827;">Jean Slim Fit Denim</h3>
                        <div style="font-size: 1.25rem; font-weight: 700; color: #008060;">79,90 ‚Ç¨</div>
                    </div>
                </div>

                <div class="product-card" style="background: white; border-radius: 1rem; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: all 0.3s; cursor: pointer;" onclick="scrollToProduct('product-demo')">
                    <img src="https://images.unsplash.com/photo-1562157873-818bc0726f68?w=600&h=600&fit=crop" 
                         alt="Veste en Cuir Vintage" 
                         style="width: 100%; aspect-ratio: 1; object-fit: cover; background: #f3f4f6;">
                    <div style="padding: 1.5rem;">
                        <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: #111827;">Veste en Cuir Vintage</h3>
                        <div style="font-size: 1.25rem; font-weight: 700; color: #008060;">149,90 ‚Ç¨</div>
                    </div>
                </div>

                <div class="product-card" style="background: white; border-radius: 1rem; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: all 0.3s; cursor: pointer;" onclick="scrollToProduct('product-demo')">
                    <img src="https://images.unsplash.com/photo-1594633313593-bab3825d0caf?w=600&h=600&fit=crop" 
                         alt="Robe Midi √âl√©gante" 
                         style="width: 100%; aspect-ratio: 1; object-fit: cover; background: #f3f4f6;">
                    <div style="padding: 1.5rem;">
                        <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: #111827;">Robe Midi √âl√©gante</h3>
                        <div style="font-size: 1.25rem; font-weight: 700; color: #008060;">89,90 ‚Ç¨</div>
                    </div>
                </div>

                <div class="product-card" style="background: white; border-radius: 1rem; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: all 0.3s; cursor: pointer;" onclick="scrollToProduct('product-demo')">
                    <img src="https://images.unsplash.com/photo-1556821840-3a63f95609a4?w=600&h=600&fit=crop" 
                         alt="Sweat √† Capuche" 
                         style="width: 100%; aspect-ratio: 1; object-fit: cover; background: #f3f4f6;">
                    <div style="padding: 1.5rem;">
                        <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: #111827;">Sweat √† Capuche Oversized</h3>
                        <div style="font-size: 1.25rem; font-weight: 700; color: #008060;">59,90 ‚Ç¨</div>
                    </div>
                </div>

                <div class="product-card" style="background: white; border-radius: 1rem; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: all 0.3s; cursor: pointer;" onclick="scrollToProduct('product-demo')">
                    <img src="https://images.unsplash.com/photo-1551028719-00167b16eac5?w=600&h=600&fit=crop" 
                         alt="Pantalon Chino" 
                         style="width: 100%; aspect-ratio: 1; object-fit: cover; background: #f3f4f6;">
                    <div style="padding: 1.5rem;">
                        <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.5rem; color: #111827;">Pantalon Chino Classique</h3>
                        <div style="font-size: 1.25rem; font-weight: 700; color: #008060;">69,90 ‚Ç¨</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 1: PRODUIT AVEC WIDGET -->
    <section id="product-demo" style="padding: 2rem 0; background: #f9fafb;">
        <div class="container">
            <h2 class="section-title" style="text-align: center; margin-bottom: 2rem; font-size: 2.5rem; font-weight: 800;">Produit avec Widget Virtual Try-On</h2>
            
            <div style="max-width: 1200px; margin: 0 auto; background: white; padding: 2rem; border-radius: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                    <!-- Product Gallery -->
                    <div>
                        <img src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=800&h=800&fit=crop" 
                             alt="T-Shirt Premium" 
                             id="mainImage"
                             style="width: 100%; aspect-ratio: 1; object-fit: cover; border-radius: 0.5rem; border: 1px solid #e5e7eb; margin-bottom: 1rem;">
                        <div style="display: flex; gap: 0.5rem;">
                            <img src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=200&h=200&fit=crop" 
                                 class="product-thumbnail active"
                                 onclick="changeMainImage(this.src.replace('w=200&h=200', 'w=800&h=800'))"
                                 style="width: 60px; height: 60px; object-fit: cover; border-radius: 0.5rem; border: 2px solid #008060; cursor: pointer;">
                            <img src="https://images.unsplash.com/photo-1618354691373-d851c5c3a990?w=200&h=200&fit=crop" 
                                 class="product-thumbnail"
                                 onclick="changeMainImage(this.src.replace('w=200&h=200', 'w=800&h=800'))"
                                 style="width: 60px; height: 60px; object-fit: cover; border-radius: 0.5rem; border: 2px solid #e5e7eb; cursor: pointer;">
                        </div>
                    </div>

                    <!-- Product Info -->
                    <div>
                        <h1 style="font-size: 2rem; font-weight: 800; margin-bottom: 1rem;">T-Shirt Premium Coton Bio</h1>
                        <div style="font-size: 2rem; font-weight: 800; color: #008060; margin-bottom: 1rem;">29,90 ‚Ç¨</div>
                        <p style="margin-bottom: 1.5rem; color: #6b7280;">T-Shirt en coton biologique certifi√©. Confort optimal et durabilit√© exceptionnelle.</p>
                        <button class="btn btn-primary" style="width: 100%; padding: 1rem;" onclick="alert('Ajout√© au panier !')">Ajouter au panier</button>
                    </div>
                </div>

                <!-- Widget VTON -->
                <div style="border-top: 2px solid #e5e7eb; padding-top: 2rem; margin-top: 2rem;">
                    <h3 style="margin-bottom: 1rem;">Essayez ce produit virtuellement</h3>
                    <div id="vton-widget-root"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 2: DASHBOARD -->
    <section id="dashboard-demo" style="padding: 2rem 0; background: white;">
        <div class="container">
            <h2 class="section-title" style="text-align: center; margin-bottom: 2rem; font-size: 2.5rem; font-weight: 800;">Dashboard - Statistiques et Activit√©</h2>
            
            <div class="demo-app-container" style="max-width: 1400px; margin: 0 auto;">
                <div class="demo-header">
                    <h1>Dashboard - StyleLab Virtual Try-On</h1>
                    <p>Vue d'ensemble de votre activit√© et statistiques</p>
                    <span class="demo-badge">D√âMO INTERACTIVE</span>
                </div>

                <div class="banner banner-info">
                    <div>
                        <strong>‚≠ê Aimez-vous Virtual Try-On ?</strong>
                        <p style="margin-top: 4px; font-size: 14px;">Laissez-nous un avis sur le Shopify App Store !</p>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon-wrapper">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M2.5 5.83333H17.5M2.5 5.83333C1.39543 5.83333 0.5 6.72876 0.5 7.83333V15.8333C0.5 16.9379 1.39543 17.8333 2.5 17.8333H17.5C18.6046 17.8333 19.5 16.9379 19.5 15.8333V7.83333C19.5 6.72876 18.6046 5.83333 17.5 5.83333M2.5 5.83333V4.16667C2.5 3.0621 3.39543 2.16667 4.5 2.16667H15.5C16.6046 2.16667 17.5 3.0621 17.5 4.16667V5.83333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="stat-value">1,247</div>
                        <div class="stat-label">Cr√©dits Restants</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon-wrapper">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M2.5 15.8333L10 2.5L17.5 15.8333H2.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M10 12.5V8.33333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="stat-value">3,842</div>
                        <div class="stat-label">Total Try-ons (30j)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon-wrapper">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M2.5 2.5H4.16667L5.83333 12.5H15.8333L17.5 5.83333H5.83333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="7.5" cy="16.6667" r="1.66667" stroke="currentColor" stroke-width="1.5"/>
                                <circle cx="15" cy="16.6667" r="1.66667" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                        </div>
                        <div class="stat-value">1,156</div>
                        <div class="stat-label">Add to Cart</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon-wrapper">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M2.5 15.8333L7.5 10.8333L12.5 15.8333L17.5 10.8333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M7.5 10.8333V2.5H12.5V10.8333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="stat-value">30.1%</div>
                        <div class="stat-label">Taux de Conversion</div>
                    </div>
                </div>

                <div class="dashboard-section">
                    <h2>G√©n√©rations Quotidiennes (7 Derniers Jours)</h2>
                    <div class="graph-container-large">
                        <div class="graph-bars">
                            <div class="graph-bar-item">
                                <div class="graph-bar-value">142</div>
                                <div class="graph-bar" style="height: 65%"></div>
                                <div class="graph-bar-label">Lun 3</div>
                            </div>
                            <div class="graph-bar-item">
                                <div class="graph-bar-value">198</div>
                                <div class="graph-bar" style="height: 90%"></div>
                                <div class="graph-bar-label">Mar 4</div>
                            </div>
                            <div class="graph-bar-item">
                                <div class="graph-bar-value">165</div>
                                <div class="graph-bar" style="height: 75%"></div>
                                <div class="graph-bar-label">Mer 5</div>
                            </div>
                            <div class="graph-bar-item">
                                <div class="graph-bar-value">223</div>
                                <div class="graph-bar" style="height: 100%"></div>
                                <div class="graph-bar-label">Jeu 6</div>
                            </div>
                            <div class="graph-bar-item">
                                <div class="graph-bar-value">187</div>
                                <div class="graph-bar" style="height: 85%"></div>
                                <div class="graph-bar-label">Ven 7</div>
                            </div>
                            <div class="graph-bar-item">
                                <div class="graph-bar-value">156</div>
                                <div class="graph-bar" style="height: 70%"></div>
                                <div class="graph-bar-label">Sam 8</div>
                            </div>
                            <div class="graph-bar-item">
                                <div class="graph-bar-value">201</div>
                                <div class="graph-bar graph-bar-today" style="height: 92%"></div>
                                <div class="graph-bar-label graph-bar-label-today">Dim 9</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="two-columns">
                    <div class="dashboard-section">
                        <h2>Produits les Plus Essay√©s</h2>
                        <div class="products-list">
                            <div class="product-item">
                                <span class="product-name">T-Shirt Premium Coton Bio</span>
                                <span class="badge badge-info">342 try-ons</span>
                            </div>
                            <div class="product-item">
                                <span class="product-name">Jean Slim Fit Denim</span>
                                <span class="badge badge-info">287 try-ons</span>
                            </div>
                            <div class="product-item">
                                <span class="product-name">Veste en Cuir Vintage</span>
                                <span class="badge badge-info">198 try-ons</span>
                            </div>
                        </div>
                    </div>
                    <div class="dashboard-section">
                        <h2>Activit√© R√©cente</h2>
                        <div class="activity-list">
                            <div class="activity-item">
                                <div class="activity-info">
                                    <p class="activity-title">T-Shirt Premium Coton Bio</p>
                                    <p class="activity-date">Aujourd'hui, 14:32</p>
                                </div>
                                <span class="badge badge-success">‚úì Succ√®s</span>
                            </div>
                            <div class="activity-item">
                                <div class="activity-info">
                                    <p class="activity-title">Jean Slim Fit Denim</p>
                                    <p class="activity-date">Aujourd'hui, 14:18</p>
                                </div>
                                <span class="badge badge-success">‚úì Succ√®s</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 3: CONFIGURATION WIDGET -->
    <section id="widget-config" style="padding: 2rem 0; background: #f9fafb;">
        <div class="container">
            <h2 class="section-title" style="text-align: center; margin-bottom: 2rem; font-size: 2.5rem; font-weight: 800;">Configuration du Widget</h2>
            
            <div class="demo-app-container" style="max-width: 1000px; margin: 0 auto;">
                <div class="demo-header">
                    <h1>Configuration du Widget</h1>
                    <p>Personnalisez l'apparence du widget Virtual Try-On</p>
                    <span class="demo-badge">D√âMO INTERACTIVE</span>
                </div>

                <div class="banner banner-info" id="infoBanner">
                    <div>
                        <strong>Important : Extension de th√®me requise</strong>
                        <p style="margin-top: 4px; font-size: 14px;">N'oubliez pas d'installer l'extension de th√®me sur vos pages produit !</p>
                    </div>
                    <button class="banner-close" onclick="document.getElementById('infoBanner').style.display='none'">√ó</button>
                </div>

                <div class="banner banner-success" id="successBanner" style="display: none;">
                    <div>
                        <strong>Configuration enregistr√©e avec succ√®s !</strong>
                        <p style="margin-top: 4px; font-size: 14px;">Les modifications sont maintenant dans la base de donn√©es.</p>
                    </div>
                    <button class="banner-close" onclick="document.getElementById('successBanner').style.display='none'">√ó</button>
                </div>

                <div class="card">
                    <h2>Param√®tres du Widget</h2>
                    <div class="divider"></div>

                    <form id="widgetForm">
                        <div class="form-group">
                            <label for="widgetText">Texte du Bouton</label>
                            <input type="text" id="widgetText" name="widgetText" value="Essayer Virtuellement ‚ú®" placeholder="Texte du bouton" />
                            <p class="help-text">Le texte affich√© sur le bouton du widget</p>
                        </div>

                        <div class="form-group">
                            <label>Couleur de Fond</label>
                            <div class="color-input-group">
                                <div class="color-picker-wrapper">
                                    <input type="color" id="widgetBgColor" value="#000000" class="color-picker" />
                                </div>
                                <div class="color-input-wrapper">
                                    <input type="text" id="widgetBg" name="widgetBg" value="#000000" placeholder="#000000" />
                                    <p class="help-text">Code couleur hexad√©cimal</p>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Couleur du Texte</label>
                            <div class="color-input-group">
                                <div class="color-picker-wrapper">
                                    <input type="color" id="widgetColorPicker" value="#ffffff" class="color-picker" />
                                </div>
                                <div class="color-input-wrapper">
                                    <input type="text" id="widgetColor" name="widgetColor" value="#ffffff" placeholder="#ffffff" />
                                    <p class="help-text">Code couleur hexad√©cimal</p>
                                </div>
                            </div>
                        </div>

                        <div class="divider"></div>
                        <button type="submit" class="btn btn-primary" id="saveBtn">Enregistrer la Configuration</button>
                    </form>

                    <div class="divider"></div>
                    <h3>Aper√ßu en Temps R√©el</h3>
                    <div class="preview-card">
                        <div class="widget-preview">
                            <button type="button" class="widget-preview-button" id="previewButton" disabled>Essayer Virtuellement ‚ú®</button>
                        </div>
                    </div>

                    <div class="divider"></div>
                    <h3>Valeurs Actuelles</h3>
                    <div class="current-values">
                        <p><strong>Texte :</strong> <span id="currentText">Essayer Virtuellement ‚ú®</span></p>
                        <p><strong>Couleur de Fond :</strong> <span id="currentBg">#000000</span></p>
                        <p><strong>Couleur du Texte :</strong> <span id="currentColor">#ffffff</span></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // Scroll to product function
        function scrollToProduct(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
        }

        // Product functions
        function changeMainImage(src) {
            document.getElementById('mainImage').src = src;
            document.querySelectorAll('.product-thumbnail').forEach(thumb => {
                thumb.classList.remove('active');
                thumb.style.borderColor = '#e5e7eb';
            });
            event.target.classList.add('active');
            event.target.style.borderColor = '#008060';
        }

        // Initialize VTON Widget
        function initVTON() {
            console.log('üîß initVTON called');
            const mainImage = document.getElementById('mainImage');
            const widgetRoot = document.getElementById('vton-widget-root');
            console.log('üì¶ Elements check:', { 
                mainImage: !!mainImage, 
                widgetRoot: !!widgetRoot, 
                initVTONWidget: !!window.initVTONWidget,
                config: !!window.config
            });
            
            if (mainImage && widgetRoot) {
                if (window.initVTONWidget) {
                    console.log('‚úÖ Initializing widget with image:', mainImage.src);
                    window.initVTONWidget({
                        containerId: 'vton-widget-root',
                        productImageUrl: mainImage.src
                    });
                } else {
                    console.warn('‚è≥ window.initVTONWidget not available yet, retrying in 500ms...');
                    setTimeout(initVTON, 500);
                }
            } else {
                console.error('‚ùå Missing elements:', { mainImage: !!mainImage, widgetRoot: !!widgetRoot });
            }
        }

        // Wait for DOM and scripts to be ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                console.log('üìÑ DOM loaded, initializing VTON in 500ms...');
                setTimeout(initVTON, 500);
            });
        } else {
            console.log('üìÑ DOM already ready, initializing VTON in 500ms...');
            setTimeout(initVTON, 500);
        }

        // Dashboard animations
        document.addEventListener('DOMContentLoaded', function() {
            const bars = document.querySelectorAll('.graph-bar');
            bars.forEach((bar, index) => {
                const height = bar.style.height;
                bar.style.height = '0%';
                setTimeout(() => {
                    bar.style.transition = 'height 0.6s ease';
                    bar.style.height = height;
                }, index * 100);
            });
        });

        // Widget Configuration Script
        (function() {
            const widgetTextInput = document.getElementById('widgetText');
            const widgetBgInput = document.getElementById('widgetBg');
            const widgetBgColorPicker = document.getElementById('widgetBgColor');
            const widgetColorInput = document.getElementById('widgetColor');
            const widgetColorPicker = document.getElementById('widgetColorPicker');
            const previewButton = document.getElementById('previewButton');
            const form = document.getElementById('widgetForm');
            const saveBtn = document.getElementById('saveBtn');
            const successBanner = document.getElementById('successBanner');
            const currentText = document.getElementById('currentText');
            const currentBg = document.getElementById('currentBg');
            const currentColor = document.getElementById('currentColor');

            if (!widgetTextInput || !form) return;

            function getLuminance(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                if (!result) return 0;
                const [r, g, b] = result.slice(1).map(val => {
                    val = parseInt(val, 16) / 255;
                    return val <= 0.03928 ? val / 12.92 : Math.pow((val + 0.055) / 1.055, 2.4);
                });
                return 0.2126 * r + 0.7152 * g + 0.0722 * b;
            }

            function getContrastTextColor(bgColor, textColor) {
                const bgLuminance = getLuminance(bgColor);
                const textLuminance = getLuminance(textColor);
                const contrast = (Math.max(bgLuminance, textLuminance) + 0.05) / (Math.min(bgLuminance, textLuminance) + 0.05);
                if (contrast < 4.5) {
                    return bgLuminance > 0.5 ? "#000000" : "#ffffff";
                }
                return textColor;
            }

            function updatePreview() {
                if (!previewButton) return;
                const text = widgetTextInput.value || "Essayer Virtuellement ‚ú®";
                const bg = widgetBgInput.value || "#000000";
                const color = widgetColorInput.value || "#ffffff";
                previewButton.textContent = text;
                previewButton.style.backgroundColor = bg;
                previewButton.style.color = getContrastTextColor(bg, color);
            }

            if (widgetBgColorPicker) widgetBgColorPicker.addEventListener('input', function(e) {
                widgetBgInput.value = e.target.value;
                updatePreview();
            });

            if (widgetColorPicker) widgetColorPicker.addEventListener('input', function(e) {
                widgetColorInput.value = e.target.value;
                updatePreview();
            });

            if (widgetBgInput) widgetBgInput.addEventListener('input', function(e) {
                const value = e.target.value;
                if (/^#[0-9A-F]{6}$/i.test(value) && widgetBgColorPicker) {
                    widgetBgColorPicker.value = value;
                    updatePreview();
                }
            });

            if (widgetColorInput) widgetColorInput.addEventListener('input', function(e) {
                const value = e.target.value;
                if (/^#[0-9A-F]{6}$/i.test(value) && widgetColorPicker) {
                    widgetColorPicker.value = value;
                    updatePreview();
                }
            });

            if (widgetTextInput) widgetTextInput.addEventListener('input', updatePreview);
            updatePreview();

            if (form && saveBtn) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    saveBtn.disabled = true;
                    saveBtn.textContent = 'Enregistrement...';
                    if (successBanner) successBanner.style.display = 'none';
                    
                    setTimeout(() => {
                        const text = widgetTextInput.value || "Essayer Virtuellement ‚ú®";
                        const bg = widgetBgInput.value || "#000000";
                        const color = widgetColorInput.value || "#ffffff";
                        
                        if (!/^#[0-9A-F]{6}$/i.test(bg) || !/^#[0-9A-F]{6}$/i.test(color)) {
                            saveBtn.disabled = false;
                            saveBtn.textContent = 'Enregistrer la Configuration';
                            return;
                        }
                        
                        if (currentText) currentText.textContent = text;
                        if (currentBg) currentBg.textContent = bg;
                        if (currentColor) currentColor.textContent = color;
                        if (successBanner) successBanner.style.display = 'flex';
                        
                        setTimeout(() => {
                            if (successBanner) successBanner.style.display = 'none';
                        }, 5000);
                        
                        saveBtn.disabled = false;
                        saveBtn.textContent = 'Enregistrer la Configuration';
                    }, 800);
                });
            }
        })();
    </script>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <h3>Style Lab Virtual Try‚ÄëOn</h3>
                    <p>Solution d'essayage virtuel IA pour boutiques Shopify en France et Europe</p>
                </div>
                <div>
                    <h4>Navigation</h4>
                    <ul>
                        <li><a href="/">Accueil</a></li>
                        <li><a href="#store">Store</a></li>
                        <li><a href="#product-demo">Produit</a></li>
                        <li><a href="#dashboard-demo">Dashboard</a></li>
                        <li><a href="#widget-config">Configuration</a></li>
                    </ul>
                </div>
                <div>
                    <h4>Ressources</h4>
                    <ul>
                        <li><a href="https://apps.shopify.com/try-on-stylelab" target="_blank" rel="noopener">App Shopify</a></li>
                        <li><a href="/documentation.html">Documentation</a></li>
                        <li><a href="/support.html">Support</a></li>
                    </ul>
                </div>
                <div>
                    <h4>Contact</h4>
                    <ul>
                        <li><a href="mailto:support@stylelab.io">support@stylelab.io</a></li>
                        <li><a href="tel:+33123456789">+33 1 23 45 67 89</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Style Lab Virtual Try‚ÄëOn. Tous droits r√©serv√©s.</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const navLinks = document.getElementById('navLinks');
            
            if (mobileMenuBtn && navLinks) {
                mobileMenuBtn.addEventListener('click', () => {
                    navLinks.classList.toggle('active');
                    mobileMenuBtn.textContent = navLinks.classList.contains('active') ? '‚úï' : '‚ò∞';
                });

                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', () => {
                        navLinks.classList.remove('active');
                        mobileMenuBtn.textContent = '‚ò∞';
                    });
                });
            }
        });
    </script>
</body>
</html>

